{% extends 'mini_fb/base.html' %}

{% block content %}
    <h2>News Feed for {{ profiles.first_name }} {{ profiles.last_name }}</h2>

    <div class="news-feed">
        {% for message in profiles.get_news_feed %}
            <div class="status-message">
                <div class="profile-info">
                    <img src="{{ message.profile.profile_image_url }}" alt="{{ message.profile.first_name }}'s profile image" style="width:50px; height:50px; border-radius:50%;">
                    <a href="{% url 'show_profile' message.profile.pk %}">{{ message.profile.first_name }} {{ message.profile.last_name }}</a>
                </div>
                <div class="message-content">
                    <p>{{ message.message }}</p>
                    <small>{{ message.timestamp|date:"M d, Y H:i" }}</small>
                </div>

                <!-- imgs -->
                {% for img in message.get_images %}
                    <img src="{{ img.image_file.url }}" alt="Image for {{ message.message }}" style="width:200px; height:auto;">
                {% endfor %}
            </div>
            <hr>
        {% empty %}
            <p>No recent activity to show in the news feed.</p>
        {% endfor %}
    </div>

    <a href="{% url 'show_profile' profiles.pk %}">Back to Profile</a>
{% endblock %}